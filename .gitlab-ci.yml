image: node:9-alpine

stages:
  - test

test:
  stage: test
  services:
    - mongo:latest
  script:
    - npm i npm@latest -g
    - npm i
    - PORT=5080 DB=mongodb://mongo:27017/contactdb node server.js &
    - npm install -g vrest-ng-cli
    - vrest-ng-cli run